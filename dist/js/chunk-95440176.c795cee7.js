(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-95440176"],{1276:function(t,e,i){"use strict";var o=i("d784"),a=i("44e7"),n=i("825a"),s=i("1d80"),l=i("4840"),r=i("8aa5"),c=i("50c4"),u=i("14c3"),d=i("9263"),h=i("d039"),g=[].push,p=Math.min,f=4294967295,v=!h((function(){return!RegExp(f,"y")}));o("split",2,(function(t,e,i){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,i){var o=String(s(this)),n=void 0===i?f:i>>>0;if(0===n)return[];if(void 0===t)return[o];if(!a(t))return e.call(o,t,n);var l,r,c,u=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,v=new RegExp(t.source,h+"g");while(l=d.call(v,o)){if(r=v.lastIndex,r>p&&(u.push(o.slice(p,l.index)),l.length>1&&l.index<o.length&&g.apply(u,l.slice(1)),c=l[0].length,p=r,u.length>=n))break;v.lastIndex===l.index&&v.lastIndex++}return p===o.length?!c&&v.test("")||u.push(""):u.push(o.slice(p)),u.length>n?u.slice(0,n):u}:"0".split(void 0,0).length?function(t,i){return void 0===t&&0===i?[]:e.call(this,t,i)}:e,[function(e,i){var a=s(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,a,i):o.call(String(a),e,i)},function(t,a){var s=i(o,t,this,a,o!==e);if(s.done)return s.value;var d=n(t),h=String(this),g=l(d,RegExp),_=d.unicode,b=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(v?"y":"g"),m=new g(v?d:"^(?:"+d.source+")",b),k=void 0===a?f:a>>>0;if(0===k)return[];if(0===h.length)return null===u(m,h)?[h]:[];var y=0,C=0,x=[];while(C<h.length){m.lastIndex=v?C:0;var $,S=u(m,v?h:h.slice(C));if(null===S||($=p(c(m.lastIndex+(v?0:C)),h.length))===y)C=r(h,C,_);else{if(x.push(h.slice(y,C)),x.length===k)return x;for(var w=1;w<=S.length-1;w++)if(x.push(S[w]),x.length===k)return x;C=y=$}}return x.push(h.slice(y)),x}]}),!v)},"9f52":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"detail"},[i("van-nav-bar",{attrs:{title:"商品详情","left-arrow":"",color:"black"},on:{"click-left":t.back}}),i("div",{staticClass:"detail_img"},[i("img",{attrs:{src:t.goods_details.large_img}})]),i("div",{staticClass:"detail_info"},[i("div",{staticClass:"detail_info_top"},[i("div",{staticClass:"detail_title"},[t._v(t._s(t.goods_details.name))]),i("div",{staticClass:"detail_choose"},[t._v("已选："+t._s(t.rule_show))]),t._l(t.goods_details.detailarr,(function(e,o){return i("div",{key:o,staticClass:"detail_classify"},[i("p",{staticClass:"detail_type"},[t._v(t._s(e.title))]),i("div",{staticClass:"detail_type_choose"},t._l(e.rule,(function(o,a){return i("div",{key:a,staticClass:"details_type_box",class:{active:e.currentIndex===a},on:{click:function(i){return t.rule_choose(e,a)}}},[t._v(" "+t._s(o.title)+" ")])})),0)])}))],2),i("div",{staticClass:"detail_info_bottom"},[i("p",{staticClass:"detail_info_bottom_information"},[t._v("商品简介")]),t._l(t.goods_details.desc,(function(e,o){return i("div",{key:o,staticClass:"detail_introduction"},[t._v(" "+t._s(o+1)+". "+t._s(e)+" ")])}))],2)]),i("div",{staticClass:"detail_bottom"},[i("div",{staticClass:"detail_quantity"},[i("span",[t._v("￥29.00")]),i("van-stepper",{attrs:{theme:"round","button-size":"22","disable-input":""},model:{value:t.number_value,callback:function(e){t.number_value=e},expression:"number_value"}})],1),i("div",{staticClass:"detail_c_navigation"},[i("van-goods-action",[i("van-goods-action-icon",{attrs:{icon:"bag-o",text:"购物袋",badge:t.shopbagCount>0?t.shopbagCount:""},on:{click:t.ToShop}}),i("van-goods-action-icon",{attrs:{icon:"like",color:t.toggle_collect?"#D15343":"#666",text:t.toggle_collect?"已收藏":"收藏"},on:{click:t.doornotcollect}}),i("van-goods-action-button",{attrs:{color:"#bd8986",type:"warning",text:"加入购物车"},on:{click:t.addToShop}}),i("van-goods-action-button",{attrs:{color:"#D15343",type:"danger",text:"立即购买"},on:{click:t.JumpOrder}})],1)],1)])],1)},a=[],n=(i("4160"),i("a15b"),i("fb6a"),i("ac1f"),i("1276"),i("159b"),i("a4d3"),i("e01a"),i("d28b"),i("d3b7"),i("3ca3"),i("ddb0"),i("06c5"));function s(t,e){var i;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=Object(n["a"])(t))||e&&t&&"number"===typeof t.length){i&&(t=i);var o=0,a=function(){};return{s:a,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,l=!0,r=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return l=t.done,t},e:function(t){r=!0,s=t},f:function(){try{l||null==i["return"]||i["return"]()}finally{if(r)throw s}}}}var l=i("5530"),r=(i("eadb"),i("2f62")),c={name:"Detail",data:function(){return{number_value:1,pid:"",goods_details:[],rule_show:"",toggle_collect:!1,initial_collect:""}},computed:Object(l["a"])({},Object(r["c"])(["shopbagCount","isShopbagCount"])),created:function(){this.initial_collect=this.toggle_collect,this.getDetailData(),this.search_collect(),this.search_shop()},mounted:function(){var t=this;this.pid=this.$route.query.id,this.axios({method:"get",url:this.BaseUrl1+"/productDetail",params:{appkey:this.appkey,pid:this.pid}}).then((function(e){if(console.log(e),t.$toast.clear(),600==e.data.code){var i=e.data.result[0],o=["cream","tem","sugar","milk"];i.detailarr=[],o.forEach((function(t){if(i[t]){var e=i[t].split("/"),o={title:i[t+"_desc"],currentIndex:0,rule:[]};e.forEach((function(t){var e={title:t};o.rule.push(e)})),i.detailarr.push(o)}})),i.desc=i.desc.split(/\n/),t.goods_details=e.data.result[0];var a=[],n="";t.goods_details.detailarr.forEach((function(t){a.push(t.rule[t.currentIndex].title)}));for(var s=0,l=a;s<l.length;s++){var r=l[s];n+=r+"/"}n=n.slice(0,-1),t.rule_show=n}else t.$toast({message:res.data.msg,forbidClick:!0,duration:3e3})})).catch((function(e){t.$toast.clear(),console.log(e)}))},methods:Object(l["a"])(Object(l["a"])({},Object(r["b"])(["changeShopbagCount","changeIsShopbagCount"])),{},{back:function(){this.$router.go(-1)},getDetailData:function(){this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0})},rule_choose:function(t,e){t.currentIndex=e;var i=[],o="";this.goods_details.detailarr.forEach((function(t){i.push(t.rule[t.currentIndex].title)}));for(var a=0,n=i;a<n.length;a++){var s=n[a];o+=s+"/"}o=o.slice(0,-1),this.rule_show=o},collect:function(){var t=this,e=this.$cookie.get("loginToken");if(!e)return this.$toast({message:"请先登录",forbidClick:!0,duration:2e3}),this.$router.push("/login");this.$toast.loading({message:"收藏中...",forbidClick:!0,duration:0}),this.axios({method:"post",url:this.BaseUrl1+"/like",data:{appkey:this.appkey,pid:this.pid,tokenString:e}}).then((function(e){t.$toast.clear(),t.$toast({message:"收藏成功",forbidClick:!0,duration:1e3}),800==e.data.code&&(t.toggle_collect=!0)})).catch((function(e){t.$toast.clear(),console.log(e)}))},search_collect:function(){var t=this,e=this.$cookie.get("loginToken");e&&this.axios({method:"get",url:this.BaseUrl1+"/findAllLike",params:{appkey:this.appkey,tokenString:e}}).then((function(e){if(2e3===e.data.code){var i,o=s(e.data.result);try{for(o.s();!(i=o.n()).done;){var a=i.value;a.pid===t.pid&&(t.toggle_collect=!0,t.initial_collect=!0)}}catch(n){o.e(n)}finally{o.f()}}})).catch((function(t){console.log(t)}))},del_collect:function(){var t=this,e=this.$cookie.get("loginToken");e&&(this.$toast.loading({message:"取消收藏中...",forbidClick:!0,duration:0}),this.axios({method:"post",url:this.BaseUrl1+"/notlike",data:{appkey:this.appkey,pid:this.pid,tokenString:e}}).then((function(e){t.$toast.clear(),t.$toast({message:"已取消收藏",forbidClick:!0,duration:1e3}),900==e.data.code&&(t.toggle_collect=!1)})).catch((function(e){t.$toast.clear(),console.log(e)})))},doornotcollect:function(){console.log(this.initial_collect),this.initial_collect?(this.initial_collect=!1,this.del_collect()):(this.initial_collect=!0,this.collect())},addToShop:function(t){var e=this,i=this.$cookie.get("loginToken");if(!i)return this.$toast({message:"请先登录",forbidClick:!0,duration:2e3}),this.$router.push("/login");var o=[];this.goods_details.detailarr.forEach((function(t){o.push(t.rule[t.currentIndex].title)})),this.$toast.loading({message:"加入购物袋中",duration:0}),this.axios({method:"post",url:this.BaseUrl1+"/addShopcart",data:{appkey:this.appkey,pid:this.pid,tokenString:i,count:this.number_value,rule:o.join("/")}}).then((function(i){e.$toast.clear(),"1"!==t?3e3==i.data.code&&(1==i.data.status?(e.changeShopbagCount(e.shopbagCount+1),e.$toast({message:"加入购物袋成功",duration:2e3})):e.$toast({message:"更改数量成功",duration:2e3})):e.$router.push({name:"Pay",query:{sids:i.data.sid}})})).catch((function(t){e.$toast.clear(),console.log(t)}))},search_shop:function(){var t=this;if(!this.isShopbagCount){var e=this.$cookie.get("loginToken");e&&this.axios({method:"get",url:this.BaseUrl1+"/shopcartRows",params:{appkey:this.appkey,tokenString:e}}).then((function(e){8e3==e.data.code&&(t.changeShopbagCount(e.data.result),t.changeIsShopbagCount(!0))})).catch((function(t){console.log(t)}))}},ToShop:function(){this.$router.push("/shop")},JumpOrder:function(){this.addToShop("1")}})},u=c,d=i("2877"),h=Object(d["a"])(u,o,a,!1,null,null,null);e["default"]=h.exports},eadb:function(t,e,i){}}]);
//# sourceMappingURL=chunk-95440176.c795cee7.js.map