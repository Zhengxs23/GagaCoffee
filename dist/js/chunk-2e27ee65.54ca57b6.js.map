{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack:///./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack:///./src/assets/js/utils.js","webpack:///./src/assets/images/bg.png","webpack:///./src/views/Safe.vue?5aaa","webpack:///src/views/Safe.vue","webpack:///./src/views/Safe.vue?7545","webpack:///./src/views/Safe.vue"],"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","Utils","data","reg","test","value","message","error","forbidClick","utils","module","exports","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","back","_m","ChangePw","SignOut","offCount","model","callback","$$v","isShow","expression","oldPw","newPw","confirmPw","SubmitnewPw","_v","staticRenderFns","name","methods","$router","go","lToken","push","$toast","loading","duration","axios","method","url","BaseUrl1","appkey","tokenString","password","oldPassword","$dialog","component"],"mappings":"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","file":"js/chunk-2e27ee65.54ca57b6.js","sourcesContent":["export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","import { Toast } from 'vant';\r\n\r\nclass Utils {\r\n  //验证表单\r\n  validForm(data) {\r\n    //验证表单的数据\r\n    for (let key in data) {\r\n      if (!data[key].reg.test(data[key].value)) {\r\n        //提示\r\n        Toast({\r\n          message: data[key].error,\r\n          forbidClick: true \r\n        });\r\n        // console.log(data[key].error);\r\n        return false;\r\n      }\r\n    }\r\n    //表单验证通过\r\n    return true;\r\n  }\r\n\r\n}\r\n\r\nexport const utils = new Utils();","module.exports = __webpack_public_path__ + \"img/bg.8895c6f4.png\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"safe\"},[_c('van-nav-bar',{attrs:{\"title\":\"安全中心\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.back}}),_vm._m(0),_c('div',{staticClass:\"safe-opt\"},[_c('div',{staticClass:\"safe-changePw\"},[_c('van-cell',{attrs:{\"title\":\"修改密码\",\"is-link\":\"\"},on:{\"click\":_vm.ChangePw}})],1),_c('div',{staticClass:\"safe-logOut\"},[_c('van-cell',{attrs:{\"title\":\"退出登录\",\"is-link\":\"\"},on:{\"click\":_vm.SignOut}})],1),_c('div',{staticClass:\"safe-unsubscribe\"},[_c('van-cell',{attrs:{\"title\":\"注销账户\",\"is-link\":\"\"},on:{\"click\":_vm.offCount}})],1)]),_c('van-popup',{attrs:{\"position\":\"bottom\",\"closeable\":\"\"},model:{value:(_vm.isShow),callback:function ($$v) {_vm.isShow=$$v},expression:\"isShow\"}},[_c('div',{staticClass:\"changePw\"},[_c('van-field',{attrs:{\"label\":\"旧密码\",\"placeholder\":\"输入旧密码\",\"type\":\"password\"},model:{value:(_vm.oldPw),callback:function ($$v) {_vm.oldPw=$$v},expression:\"oldPw\"}}),_c('van-field',{attrs:{\"label\":\"新密码\",\"placeholder\":\"输入新密码\",\"type\":\"password\"},model:{value:(_vm.newPw),callback:function ($$v) {_vm.newPw=$$v},expression:\"newPw\"}}),_c('van-field',{attrs:{\"label\":\"确认密码\",\"placeholder\":\"确认新密码\",\"type\":\"password\"},model:{value:(_vm.confirmPw),callback:function ($$v) {_vm.confirmPw=$$v},expression:\"confirmPw\"}}),_c('van-button',{staticClass:\"register_btn\",attrs:{\"round\":\"\",\"type\":\"default\",\"block\":\"\"},on:{\"click\":_vm.SubmitnewPw}},[_vm._v(\"提交修改\")])],1)])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"safe_bg\"},[_c('img',{attrs:{\"src\":require(\"../assets/images/bg.png\"),\"alt\":\"\"}})])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"safe\">\r\n    <van-nav-bar title=\"安全中心\" left-arrow @click-left=\"back\" />\r\n    <div class=\"safe_bg\">\r\n      <img src=\"../assets/images/bg.png\" alt=\"\" />\r\n    </div>\r\n    <div class=\"safe-opt\">\r\n      <div class=\"safe-changePw\">\r\n        <van-cell title=\"修改密码\" is-link @click=\"ChangePw\" />\r\n      </div>\r\n      <div class=\"safe-logOut\">\r\n        <van-cell title=\"退出登录\" is-link @click=\"SignOut\" />\r\n      </div>\r\n      <div class=\"safe-unsubscribe\">\r\n        <van-cell title=\"注销账户\" is-link @click=\"offCount\" />\r\n      </div>\r\n    </div>\r\n    <van-popup v-model=\"isShow\" position=\"bottom\" closeable>\r\n      <div class=\"changePw\">\r\n        <van-field\r\n          v-model=\"oldPw\"\r\n          label=\"旧密码\"\r\n          placeholder=\"输入旧密码\"\r\n          type=\"password\"\r\n        />\r\n        <van-field\r\n          v-model=\"newPw\"\r\n          label=\"新密码\"\r\n          placeholder=\"输入新密码\"\r\n          type=\"password\"\r\n        />\r\n        <van-field\r\n          v-model=\"confirmPw\"\r\n          label=\"确认密码\"\r\n          placeholder=\"确认新密码\"\r\n          type=\"password\"\r\n        />\r\n        <van-button\r\n          class=\"register_btn\"\r\n          round\r\n          type=\"default\"\r\n          block\r\n          @click=\"SubmitnewPw\"\r\n          >提交修改</van-button\r\n        >\r\n      </div>\r\n    </van-popup>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport \"../assets/less/safe.less\";\r\nimport { utils } from \"../assets/js/utils\";\r\nexport default {\r\n  name: \"Safe\",\r\n  data() {\r\n    return {\r\n      isShow: false,\r\n      oldPw: \"\",\r\n      newPw: \"\",\r\n      confirmPw: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    //返回上一级\r\n    back() {\r\n      this.$router.go(-1);\r\n    },\r\n    //修改密码\r\n    ChangePw() {\r\n      this.isShow = true;\r\n    },\r\n    //提交修改的密码\r\n    SubmitnewPw() {\r\n      let lToken = this.$cookie.get(\"loginToken\");\r\n      if (!lToken) {\r\n        return this.$router.push(\"/login\");\r\n      }\r\n      this.$toast.loading({\r\n        message: \"加载中\",\r\n        forbidClick: true,\r\n        duration: 0,\r\n      });\r\n\r\n      let changePw_obj = {\r\n        newPw: {\r\n          value: this.newPw,\r\n          reg: /^[A-Za-z]\\w{5,15}$/,\r\n          error: \"密码支持字母数字_组合且首字符必须为字母\",\r\n        },\r\n        confirmPw: {\r\n          value: this.confirmPw,\r\n          reg: /^[A-Za-z]\\w{5,15}$/,\r\n          error: \"密码支持字母数字_组合且首字符必须为字母\",\r\n        },\r\n      };\r\n\r\n      //格式判断\r\n      if (!utils.validForm(changePw_obj)) {\r\n        this.oldPw = \"\";\r\n        this.newPw = \"\";\r\n        this.confirmPw = \"\";\r\n        return;\r\n      }\r\n\r\n      if (this.newPw !== this.confirmPw) {\r\n        this.$toast({\r\n          message: \"两次密码不正确\",\r\n          forbidClick: true,\r\n          duration: 2000,\r\n        });\r\n        this.oldPw = \"\";\r\n        this.newPw = \"\";\r\n        this.confirmPw = \"\";\r\n        return;\r\n      }\r\n      this.axios({\r\n        method: \"POST\",\r\n        url: this.BaseUrl1 + \"/updatePassword\",\r\n        data: {\r\n          appkey: this.appkey,\r\n          tokenString: lToken,\r\n          password: this.confirmPw,\r\n          oldPassword: this.oldPw,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          console.log(res);\r\n          this.$toast.clear();\r\n          if (res.data.code === 700) {\r\n            this.$toast({\r\n              message: res.data.msg,\r\n              forbidClick: true,\r\n              duration: 3000,\r\n            });\r\n            return this.$router.push(\"/login\");\r\n          }\r\n          if (res.data.code === \"E003\") {\r\n            this.$toast({\r\n              message: res.data.msg,\r\n              forbidClick: true,\r\n              duration: 3000,\r\n            });\r\n            this.oldPw = \"\";\r\n            this.newPw = \"\";\r\n            this.confirmPw = \"\";\r\n          }\r\n\r\n          if (res.data.code === \"E001\") {\r\n            this.$cookie.set(\"loginToken\", \"\", \"1d\");\r\n            this.$toast({\r\n              message: \"修改密码成功，请重新登录\",\r\n              forbidClick: true,\r\n              duration: 2000,\r\n            });\r\n            return this.$router.push(\"/login\");\r\n          } else {\r\n            this.$toast({\r\n              message: res.data.msg,\r\n              forbidClick: true,\r\n              duration: 3000,\r\n            });\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          this.$toast.clear();\r\n          console.log(err);\r\n        });\r\n    },\r\n    //退出登录\r\n    SignOut() {\r\n      this.$dialog\r\n        .confirm({\r\n          title: \"退出登录\",\r\n          message: \"真的要退出登录吗？？？\",\r\n        })\r\n        .then(() => {\r\n          this.$cookie.set(\"loginToken\", \"\", \"1d\");\r\n          this.$toast({\r\n            message: \"退出登录成功\",\r\n            forbidClick: true,\r\n            duration: 2000,\r\n          });\r\n          return this.$router.push(\"/\");\r\n        })\r\n        .catch(() => {\r\n          // on cancel\r\n        });\r\n    },\r\n    //注销账户\r\n    offCount() {\r\n      this.$dialog\r\n        .confirm({\r\n          title: \"注销账户\",\r\n          message: \"真的要注销账户吗？？？\",\r\n        })\r\n        .then(() => {\r\n          let lToken = this.$cookie.get(\"loginToken\");\r\n          if (!lToken) {\r\n            return this.$router.push(\"/login\");\r\n          }\r\n          this.$toast.loading({\r\n            message: \"加载中\",\r\n            forbidClick: true,\r\n            duration: 0,\r\n          });\r\n          this.axios({\r\n            method: \"POST\",\r\n            url: this.BaseUrl1 + \"/destroyAccount\",\r\n            data: {\r\n              appkey: this.appkey,\r\n              tokenString: lToken,\r\n            },\r\n          })\r\n            .then((res) => {\r\n              console.log(res);\r\n              this.$toast.clear();\r\n              if (res.data.code === 700) {\r\n                this.$toast({\r\n                  message: res.data.msg,\r\n                  forbidClick: true,\r\n                  duration: 3000,\r\n                });\r\n                return this.$router.push(\"/login\");\r\n              }\r\n              if (res.data.code === \"G001\") {\r\n                this.$cookie.set(\"loginToken\", \"\", \"1d\");\r\n                this.$router.push(\"/\");\r\n              }\r\n              this.$toast({\r\n                message: res.data.msg,\r\n                forbidClick: true,\r\n                duration: 3000,\r\n              });\r\n            })\r\n            .catch((err) => {\r\n              this.$toast.clear();\r\n              console.log(err);\r\n            });\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Safe.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Safe.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Safe.vue?vue&type=template&id=5dcb453e&\"\nimport script from \"./Safe.vue?vue&type=script&lang=js&\"\nexport * from \"./Safe.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}